# Redis 客户端

## Java 中 Jedis

1. Maven 依赖

```xml
<dependency>
  <groupId>redis.clients</groupId>
  <artifactId>jedis</artifactId>
  <version>2.9.0</version>
  <scope>compile</scope>
</dependency>
```

2. Jedis 直连

```lua
# 1. 生成一个Jedis对象，这个对象负责和指定Redis节点进行通信
Jedis jedis = new Jedis("127.0.0.1", 6379);
# 2. jedis执行set操作
jedis.set("hello", "world");
# 3. jedis执行get操作，value="world"
String value = jedis.get("hello")
```

3. Jedis 连接池使用
   > 1. 从资源池借 Jedis 对象
   > 2. Jedis 执行命令
   > 3. 返回执行结果
   > 4. 归还 Jedis 对象给连接池

- 简单使用

1. 初始化 Jedis 连接池，通常来讲 JedisPool 是单例的，

```java
GenericObjectPoolConfig poolConfig = new GenericObjectPoolConfig();
JedisPool jedisPool = new JedisPool(poolConfig, "127.0.0.1", 6379);

```

2. 调用

```java
Jedis jedis = null;
try{
    // 1. 从连接池获取jedis对象
    jedis = jedisPool.getResource();
    // 2. 执行操作
    jedis.set("hello", "world");
}catch(Exception e) {
    e.printStackTrace();
} finally {
    if(jedis != null) {
        // 如果使用JedisPool.close操作不是关闭连接，代表归还连接池
        jedis.close();
    }
}
```

## 对比

```lua
                        优点                        缺点
直连                 * 简单方便                     * 存在每次新建、关闭TCP开销
                    * 适用于少量长期连接的场景        * 资源无法控制，存在连接泄露的可能
                                                  * Jedis对象线程不安全

连接池               * Jedis预先生成，降低开销使用     * 相对于直连，使用相对麻烦
                    * 连接池的形式保护和控制资源       * 尤其在资源的管理上，需要很多参数来保证，
                      的使用                          一旦规划不合理，也会出现问题。
```

## Jedis 连接池配置
